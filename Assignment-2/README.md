

# рзз. тЭУ PostgrSQL ржП  `Primary Key` ржПржмржВ `Foreign Key`  ржПрж░ ржХржирж╕рзЗржкрзНржЯ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░


ЁЯЯв**Primary Key** рж╣рж▓ ржПржоржи ржПржХржЯрж┐ ржЗржЙржирж┐ржХ ржХрж▓рж╛ржо ржХрзЗ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗ ржпрзЗржЯрж┐ рж╣ржмрзЗ  ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЯрзЗржмрж┐рж▓рзЗрж░ ржорзБрж▓ ржирж┐рзЯржирзНрждрзНрж░ржХ ред `Primary Key`  ржПржХржЯрж┐ ржЯрзЗржмрж┐рж▓рзЗ ржХрзЗржмрж▓ ржПржХржЯрж┐ ржорж╛рждрзНрж░  рж╣рждрзЗ ржкрж╛рж░ржмрзЗ ржПржмржВ  PostgrSQL ржПржХржЯрж┐ ржбрж╛ржЗржирж╛ржорж┐ржХ ржЗржирзНржбрзЗржХрзНрж╕рж┐ржВ  рждрзИрж░рж┐ 
ржХрж░рзЗ `Primary Key` ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржпрзЗржЯрж┐ ржжрзНрж░рзБржд рж╕рж╛рж░рзНржЪрж┐ржВ ржПрж░ ржХрж╛ржЬ ржХрж░рзЗ ред`Primary Key` рж╣рждрзЗ рж╣рж▓рзЗ ржХрж┐ржЫрзБ ржЧрзБрж░рзБрждрзНржмржкрзБрж░рзНржи рж░рзБрж▓ ржорзЗржирзЗ ржЪрж▓рждрзЗ рж╣ржмрзЗред рждрж╛рж░ржоржзрзЗржпрж╛ ржЕржирзНржпрждржо рж╣рж▓

ЁЯУМ `Primary Key` ржХрж▓рж╛ржорзЗ ржХрзЛржи `NULL`  ржнрзЗрж▓рзБ ржерж╛ржХрждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред

ЁЯУМ `Primary Key` ржХрж▓рж╛ржорзЗ ржХрзЛржи рж░рж┐ржкрж┐ржЯрзЗрж╢ржи  ржнрзЗрж▓рзБ ржерж╛ржХрждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред

ЁЯУМ ржПржХржЯрж┐ ржЯрзЗржмрж┐рж▓рзЗ ржХрзЗржмрж▓ржорж╛рждрзНрж░ ржПржХржЯрж┐ `Primary Key` ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ|

ЁЯУМ `Primary Key`  ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ ржХрж▓рж╛ржо ржПрж░ рж╕ржорзНржмржирзЯрзЗ рж╣рждрзЗ ржкрж╛рж░ржмрзЗред


## ЁЯСЙ`Primary Key` ржЙржжрж╛рж╣рж░ржг

```sql
-- ржПржХржЯрж┐ ржХрж▓рж╛ржо
CREATE TABLE students (
    student_id SERIAL PRIMARY KEY,
    name VARCHAR(100)
);

--ржПржХржзрж┐ржХ ржХрж▓рж╛ржо
CREATE TABLE enrollments (
    student_id INT,
    course_id INT,
    PRIMARY KEY (student_id, course_id)
);
```
ЁЯЯв**Foreign Key** рж╣рж▓ ржПржоржи  ржЖрж░рзЗржХржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржХрж▓рж╛ржо ржпрзЗржЯрж┐ ржорзБрж▓ржд ржЕржирзНржп ржЖрж░рзЗржХржЯрж┐ ржЯрзЗржмрж┐рж▓рзЗрж░ ржкрзНрж░рж╛ржЗржорж╛рж░рж┐ ржХрж┐ ржХрзЗ рж░рзЗржлрж╛рж░ ржХрж░рзЗред рж╕рж╣ржЬ ржмрж╛ржВрж▓рж╛рзЯ ржмрж▓рждрзЗ ржЧрзЗрж▓рзЗ `Foreign Key`  ржжрзБржЗ ржмрж╛ рждрждрзЛржзрж┐ржХ ржЯрзЗржмрж┐рж▓рзЗрж░ ржоржзрзНржпрзЗ рж╕рзЗрждрзБ ржмржирзНржзржи ржмрж╛ рж▓рж┐ржВржХ ржЖржк рж╣рж┐рж╕рж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗред`Foreign Key` рж╣рждрзЗ рж╣рж▓рзЗ ржХрж┐ржЫрзБ ржЧрзБрж░рзБрждрзНржмржкрзБрж░рзНржи рж░рзБрж▓ ржорзЗржирзЗ ржЪрж▓рждрзЗ рж╣ржмрзЗред рждрж╛рж░ржоржзрзЗржпрж╛ ржЕржирзНржпрждржо рж╣рж▓

- ржЕржирзНржп ржЯрзЗржмрж┐рж▓рзЗрж░ Primary Key ржмрж╛ Unique key- рж╣рждрзЗ рж╣ржмрзЗ ред
- ржЕржмрж╢рзНржпржЗржд ржкрзНрж░рж╛ржЗржорж╛рж░рж┐ ржмрж╛ ржЗржЙржирж┐ржХ ржХрж┐ ржПрж░ ржбрзЗржЯрж╛ ржЯрж╛ржЗржкрзЗрж░ ржорж┐рж▓ ржерж╛ржХрждрзЗ рж╣ржмрзЗ
- `Foreign Key` рждрзЗ NULL ржнрзЗрж▓рзБ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред
- ржПржХржЯрж┐ ржЯрзЗржмрж┐рж▓рзЗрж░ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ Foreign Key ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ
- `Foreign key` ржХрж▓рж╛ржорзЗ ржЕржмрж╢рзНржпржЗ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрзЛржорзЗржЗржирзЗрж░ ржнрзЗрж▓рзБ ржерж╛ржХрждрзЗ рж╣ржмрзЗред ржЕрж░рзНржерж╛рзО ржЕржиржп ржЯрзЗржмрж┐рж▓рзЗрж░ ржкрзНрж░рж╛ржЗржорж╛рж░рж┐ ржХрж┐ ржПрж░  ржнрзЗрж▓рзБ ржпржжрж┐ рзз ржерзЗржХрзЗ рзл рж╣рзЯ , `Foreign key` ржХрж▓рж╛ржорзЗ ржЕржмрж╢рзНржпржЗ рзз ржерзЗржХрзЗ рзл ржПрж░ ржоржзржпрзЗ ржерж╛ржХрждрзЗ рж╣ржмрзЗред
- рж╕ржорзНржкрж░рзНржХрж┐ржд рж░рзЗржХрж░рзНржб ржорзБржЫрзЗ ржлрзЗрж▓рждрзЗ ржЕржержмрж╛ржЖржкржбрзЗржЯ ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ ржЕржмрж╢рзНржпржЗ  ON DELETE/ ON UPDATE ржжрж┐ржпрж╝рзЗ ржХржиржЯрзНрж░рзЛрж▓ ржХрж░рждрзЗ рж╣ржмрзЗред

## ЁЯСЙ`Foreign Key` ржЙржжрж╛рж╣рж░ржг
```sql
CREATE TABLE customers (
    customer_id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE,
    address TEXT
);

CREATE TABLE orders (
    order_id SERIAL PRIMARY KEY,
    customer_id INT REFERENCES customers(customer_id) ON DELETE CASCADE
);
```



# рзи. тЭУ `varchar`  ржПржмржВ `char` ржПрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп ржХрж┐ ? ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░ред

ЁЯЯв`varchar`  ржПржмржВ `char` ржжрзБржЗржЯрж┐ржЗ string (ржЯрзЗржХрзНрж╕ржЯ) ржЯрж╛ржЗржкржб рж╣рж▓рзЗржУ рждрж╛ржжрзЗрж░ ржоржзрзНржпрзЗ ржмрзЗрж╢ ржХрж┐ржЫрзБ ржкрж╛рж░рзНржержХрзНржп рж▓ржХрзНрж╖ ржХрж░рж╛ ржпрж╛рзЯред

## ЁЯФ╣ CHAR(n) (Fixed-length character)
ржПржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржжрзИрж░рзНржШрзНржпрзЗрж░ (fixed length) ржПржХржЯрж┐ ржЯрзЗржХрзНрж╕ржЯ ржбрзЗржЯрж╛ ржЯрж╛ржЗржкредржзрж░рж╛ ржпрж╛ржХ ржЖржорж░рж╛ ржЯрзЗржмрж┐рж▓рзЗ ржХрзНрж░рж┐рзЯрзЗржЯ ржХрж░рж╛рж░ рж╕ржорзЯ ржЖржорж░рж╛ ржПржХржЯрж┐ ржХрж▓рж╛ржо user_name ржПрж░ ржбрзЗржЯрж╛ ржЯрж╛ржЗржк `CHAR(рззрзж)`  ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рж╛ржорзНрж░ред ржПржЯрж┐рж░ ржорж╛ржзржпрзНржпржорзЗ PostgreSQL рж╕рж░рзНржмржжрж╛ рззрзжржЯрж┐ ржЕржХрзНрж╖рж░ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░ржмрзЗ ржкрзНрж░рждрж┐ржЯрж┐ users_name  ржлрж┐рж▓рзНржбрзЗрж░ ржЬржирзНржпредржпржжрж┐ ржЖржорж░рж╛ ржХржо ржЕржХрзНрж╖рж░ ржжрж┐рзЯрзЗ ржбрзЗржЯрж╛ рж╕ржВржХржХрзНрж╖ржг ржХрж░рж╛рж░ ржЪрзЗрж╕рзНржЯрж╛ ржХрж░рж┐ (ржпрзЗржоржи: 'cat'), рждрж╛рж╣рж▓рзЗ ржмрж╛ржХрж┐ ржЬрж╛рзЯржЧрж╛ ржлрж╛ржБржХрж╛ (space) ржжрж┐рзЯрзЗ ржкрзВрж░ржг ржХрж░рж╛ рж╣ржмрзЗ тАФ 'cat       'ред ржПржЯрж┐ рждржЦржи ржЙржкржпрзЛржЧрзА ржпржЦржи рж╕ржм ржбрзЗржЯрж╛рж░ ржжрзИрж░рзНржШрзНржп рж╕ржорж╛ржи рж╣ржмрзЗ (ржпрзЗржоржи: PIN, gender code ржЗрждрзНржпрж╛ржжрж┐)ред

### тЬЕ ржЙржжрж╛рж╣рж░ржг:

```sql
user_name CHAR(10) NOT NULL;
```
'Ali' тЖТ рж╕рзНржЯрзЛрж░ рж╣ржмрзЗ 'Ali ' (7ржЯрж╛ space ржпрзЛржЧ рж╣ржмрзЗ)

## ЁЯФ╣ VARCHAR(n) (Variable-length character):
ржПржЯрж┐ ржкрж░рж┐ржмрж░рзНрждржирж╢рзАрж▓ ржжрзИрж░рзНржШрзНржпрзЗрж░ (variable length) ржПржХржЯрж┐ ржЯрзЗржХрзНрж╕ржЯ ржбрзЗржЯрж╛ ржЯрж╛ржЗржкред ржзрж░рж╛ ржпрж╛ржХ ржЖржорж░рж╛ ржЯрзЗржмрж┐рж▓ ржХрзНрж░рж┐рзЯрзЗржЯ ржХрж░рж╛рж░ рж╕ржорзЯ ржЖржорж░рж╛ ржПржХржЯрж┐ ржХрж▓рж╛ржо user_name ржПрж░ ржбрзЗржЯрж╛ ржЯрж╛ржЗржк `VARCHAR(рззрзж)`  ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рж╛ржорзНрж░ред ржПржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ржЖрж░ ржлрж▓рзЗ PostgreSQL рж╕рж░рзНржмрзЛржЪрзНржЪ рззрзжржЯрж┐ ржЕржХрзНрж╖рж░ ржПрж░ ржПржХржЯрж┐ ржбрж╛рзЯржирж╛ржорж┐ржХ рж╕рзНржЯрзЛрж░рзЗржЬ ржХрзНрж░рж┐рзЯрзЗржЯ ржХрж░ржмрзЗред ржЖржЧрзЗрж░ ржЙржжрж╛рж╣рж░ржг ржПрж░ ржХржерж╛ржЗ ржмрж▓рж╛ ржпрж╛ржХред ржпржжрж┐ ржЖржорж░рж╛ ржХржо ржЕржХрзНрж╖рж░ ржжрж┐рзЯрзЗ ржбрзЗржЯрж╛ рж╕ржВржХржХрзНрж╖ржг ржХрж░рж╛рж░ ржЪрзЗрж╕рзНржЯрж╛ ржХрж░рж┐ (ржпрзЗржоржи: 'cat'), рждрж╛рж╣рж▓рзЗ PostgreSQL ржХрзЗржмрж▓ржорж╛рждрзНрж░ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржЕржХрзНрж╖рж░ржЗ рж╕рзНржЯрзЛрж░ ржХрж░ржмрзЗред ржЕрждрж┐рж░рж┐ржХрзНржд рж╕рзНржкрзЗрж╕ ржмрж╛ ржЧрж╛рж░рзНржмрзЗржЬ ржХрзЛржи ржнрзЗрж▓рзБ рж╕рзЗ рж╕рзНржЯрзЛрж░ ржХрж░ржмрзЗ ржирж╛ред
ржПржЯрж┐ ржмрзЗрж╢рж┐ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ, ржХрж╛рж░ржг ржПржЯрж┐ ржорзЗржорзЛрж░рж┐ рж╕рж╛рж╢рзНрж░ржпрж╝рзА ржПржмржВ ржлрзНрж▓рзЗржХрзНрж╕рж┐ржмрж▓редржпржЦржи ржЖржорж░рж╛ ржЕржирзЗржХ ржмрзЗрж╢рж┐ рж╕рзНржЯрзНрж░рж┐ржВ ржЯрж╛ржЗржкржб ржбрзЗржЯрж╛ ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рж╛рж░ ржкрзНрж░ржпрж╝рзЛржЬржи ржкрж░рзЗ рждржЦржи ржЖржорж░рж╛ `VARCHAR(n)` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржерж╛ржХрж┐ред
### тЬЕ ржЙржжрж╛рж╣рж░ржг:

```sql
user_name VARCHAR(10) NOT NULL;
```
'Ali' тЖТ рж╕рзНржЯрзЛрж░ рж╣ржмрзЗ 'Ali' (ржХрзЛржи space ржпрзЛржЧ рж╣ржмрзЗ ржирж╛)


## ЁЯЖЪ ржкрж╛рж░рзНржержХрзНржп
| ржмрзИрж╢рж┐рж╖рзНржЯрзНржп      | `CHAR(n)`                       | `VARCHAR(n)`                      |
| -------------- | ------------------------------- | --------------------------------- |
| ржжрзИрж░рзНржШрзНржп        | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ (fixed)               | ржкрж░рж┐ржмрж░рзНрждржирж╢рзАрж▓ (variable)            |
| ржлрж╛ржБржХрж╛ ржЬрж╛рзЯржЧрж╛    | ржХржо ржЕржХрзНрж╖рж░рзЗ space ржжрж┐рзЯрзЗ ржкрзВрж░ржг рж╣рзЯ    | ржЕрждрж┐рж░рж┐ржХрзНржд ржХрж┐ржЫрзБ ржпрзЛржЧ рж╣рзЯ ржирж╛           |
| ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕   | ржЦрзБржм ржмрзЬ рж╕рзНржХрзЗрж▓рзЗ marginally faster | рж╕рж╛ржзрж╛рж░ржгржд preferred for flexibility |
| ржорзЗржорзЛрж░рж┐ ржмрзНржпржмрж╣рж╛рж░ | ржмрзЗрж╢рж┐ рж╣рзЯ                   | ржХржо рж▓рж╛ржЧрзЗ                           |
 ржбрзЗржЯрж╛ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ | ржХржарж┐ржи | рж╕рж╣ржЬ |


# рзй.  тЭУ `LIMIT` ржПржмржВ `OFFSET` ржХрзНрж▓ржЬрзЗрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж┐ ржХрж┐ ? ржмрзНржпрж╛ржЦрзНржпрж╛ рж╕рж╣ред
## ЁЯФ╣ LIMIT ржХрзА?
`LIMIT` рж╣рж▓ ржПржоржи ржПржХржЯрж┐ ржжрж░ржХрж╛рж░рж┐ ржХрзНрж▓ржЬ , ржпрзЗржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ SQL-ржП ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗ ржХрждржЯрж┐ рж░рзЗржХрж░рзНржб (row) рж╕рзЗ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗред ржзрж░рж╛ ржпрж╛ржХ ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржПржХржЯрж┐ ржЕржлрж┐рж╕рзЗрж░ ржХрж░рзНржоржЪрж╛рж░рзА ржжрзЗрж░ ржбрзЗржЯрж╛ ржмрж┐рж╖рзЯржХ ржЯрзЗржмрж┐рж▓ ржЖржЫрзЗред ржЖржорж░рж╛ ржПржЦржи ржЬрж╛ржирждрзЗ ржЪрж╛ржЗ рж╕рж░рзНржмрзЛржЪрзНржЪ рж╕рзНржпрж╛рж▓рж╛рж░рж┐ ржкрж╛ржУрзЯрж╛ рзл ржЬржи ржХрж░рзНржоржЪрж╛рж░рзАржжрзЗрж░ ржирж╛ржо ржПржмржВ рж╕рзНржпрж╛рж▓рж╛рж░рж┐рж░ ржкрж░рж┐ржорж╛ржгред
ржПржХрзНрж╖рзЗрждрзНрж░рзЗ ржЖржорж░рж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ `LIMIT`ред
## ЁЯУМ ржЙржжрж╛рж╣рж░ржг:
```sql
SELECT name,salary FROM employee
ORDER BY salary
LIMIT 5;
```

ржПржЦрж╛ржирзЗ ржХрзЗржмрж▓ржорж╛рждрзНрж░ рзлржЯрж┐ ржХрж░рзНржоржЪрж╛рж░рзАрж░ ржирж╛ржорзНрж░, рж╕рзНржпрж╛рж▓рж╛рж░рж┐  рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗред

## ЁЯФ╣OFFSET ржХрзА?
`OFFSET` ржХрзНрж▓ржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рждрзЗ ржкрж╛рж░рж┐ ржХрждржЯрж┐ рж░рзЗржХрж░рзНржб ржмрж╛ржж/рж╕рзНржХрж┐ржк ржХрж░рзЗ  ржЖржорж░рж╛ ржЖржорж╛ржжрзЗрж░ ржмрж╛ржХрж┐ ржбрзЗржЯрж╛ ржжрзЗржЦрждрзЗ ржкрж╛рж░рж┐ред ржзрж░рж┐ ржПржХржЯрж┐ ржЯрзЗржмрж┐рж▓ ржЖржЫрзЗ students, ржпрзЗржЦрж╛ржирзЗ рззрзжрзж ржЬржи ржЫрж╛рждрзНрж░рзЗрж░ ржирж╛ржо ржЖржЫрзЗред ржЖржорж░рж╛ ржкрзНрж░ржержо рзл ржЬржи ржмрж╛ржж ржжрж┐рзЯрзЗ ржкрж░рзЗрж░ рж╕ржмрж╛ржЗржХрзЗ ржжрзЗржЦрждрзЗ ржЪрж╛ржЗ}ред 

```sql
SELECT * FROM students
OFFSET 5;
```

## ЁЯФ╕ LIMIT ржУ OFFSET ржПржХрж╕рж╛ржерзЗ ржмрзНржпржмрж╣рж╛рж░:
рж╕рж╛ржзрж╛рж░ржгржд Pagination ржмрж╛ ржкрзЗржЬрж┐ржВ ржмрзНржпржмрж╕рзНржерж╛рзЯ (ржпрзЗржоржи ржкрзНрж░рждрж┐ ржкрзЗржЬрзЗ рзлржЯрж┐ ржХрж░рзЗ ржбрзЗржЯрж╛ ржжрзЗржЦрж╛ржирзЛ) рж▓рж┐ржорж┐ржЯ ржЖржПржмржВ ржЕржлрж╕рзЗржЯ ржЕржирзЗржХ ржмрзЗрж╢рж┐ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯрзЗ ржерж╛ржХрзЗред ржПржЯрж┐рж░ ржорж╛ржзрзНржпржорзЗ ржмрзЬ ржбрзЗржЯрж╛ржмрзЗржЗржЬрзЗ ржХрж┐ржЫрзБ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржВржЦрзНржпржХ ржбрзЗржЯрж╛ ржЖржорж░рж╛ рж╕рж╣ржЬрзЗ ржжрзЗржЦржЕрждрзЗ ржкрж╛рж░рж┐ред ржПржЯрж┐ ржжрзНрж░рзБржд ржлрж▓рж╛ржлрж▓ ржкрзЗрждрзЗ ржУ рж╕рж╛рж░рзНржнрж╛рж░ ржПрж░ рж▓рзЛржб ржХржорж╛рждрзЗ ржЕржирзЗржХ ржмрзЗрж╢рж┐ ржХрж╛рж░рзНржпржХрж░рж┐ рж╕ржорж╛ржзрж╛ржиред
```sql
SELECT * FROM students
LIMIT 5 OFFSET page_number*5; --page_number = 0,1,2,,,,,,
```
 ржЖржорж░рж╛ ржзрж░рзЗ ржирж┐рж▓рж╛ржо ржкрзНрж░рждрж┐ ржкрзЗржЗржЬрзЗ рзл ржЯрж┐ ржХрж░рзЗ ржбрзЗржЯрж╛ ржжрзЗржЦрж╛рждрзЗ рж╣ржмрзЗ .рж╕рзЗржХрзНрж╖рзЗрждрзНрж░рзЗ ржЖржорж░рж╛ ржпржжрж┐ ржкрзЗржЗржЬ_ржирж╛ржорзНржмрж╛рж░ = рзи ржжрзЗржЗ рждрж╛рж╣рж▓рзЗ рзи*рзл = ржкрзНрж░ржержо рззрзж ржЯрзА
ржбрзЗржЯрж╛ рж╕рзНржХрж┐ржк ржХрж░рзЗ ржкрж░ржмрж░рзНрждрзА рзлржЯрзА ржбрзЗржЯрж╛ рж╢рзЛ ржХрж░ржмрзЗред


# рзк. тЭУ `JOIN` operation ржПрж░ ржЧрзБрж░рзБрждрзНржм ржХрж┐ ? PostgreSQL-ржПрж░ JOIN ржЕржкрж╛рж░рзЗрж╢ржи ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ ?
ЁЯФ╣ ржбрзЗржЯрж╛ржмрзЗржЬ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛рзЯ, ржмрж┐рж╢рзЗрж╖ ржХрж░рзЗ PostgreSQL-ржПрж░ ржорждрзЛ рж░рж┐рж▓рзЗрж╢ржирж╛рж▓ ржбрзЗржЯрж╛ржмрзЗржЬрзЗ, JOIN ржЕржкрж╛рж░рзЗрж╢ржи ржПржХржЯрж┐ ржЕржкрж░рж┐рж╣рж╛рж░рзНржп ржмрж┐рж╖рзЯред ржПржЯрж┐ ржжрзБржЗ ржмрж╛ рждрждрзЛржзрж┐ржХ ржЯрзЗржмрж┐рж▓рзЗрж░ ржоржзрзНржпрзЗ рж╕ржорзНржкрж░рзНржХ рждрзИрж░рж┐ ржХрж░рзЗ ржПржмржВ рж╕ржорзНржкрж░рзНржХржпрзБржХрзНржд рждржерзНржп рж╕ржорзБрж╣ржХрзЗ ржПржХрждрзНрж░рзЗ ржЙржкрж╕рзНржерж╛ржкржи ржХрж░рзЗред ржЖржЬржХрзЗрж░ ржПржЗ рж▓рзЗржЦрж╛рзЯ ржЖржорж░рж╛ ржЬрж╛ржиржмрзЛ JOIN ржХрзА, ржХрзЗржи ржжрж░ржХрж╛рж░, ржПрж░ ржкрзНрж░ржХрж╛рж░ржнрзЗржж ржУ ржмрзНржпржмрж╣рж╛рж░ ржЙржжрж╛рж╣рж░ржг рж╕рж╣ред
## ЁЯУШ `JOIN` ржХрзА?

`JOIN` рж╣рж▓рзЛ SQL-ржПрж░ ржПржХржЯрж┐ ржХржорж╛ржирзНржб ржпрж╛ ржжрзБржЗ ржмрж╛ рждрждрзЛржзрж┐ржХ ржЯрзЗржмрж┐рж▓ржХрзЗ ржпрзБржХрзНржд ржХрж░рзЗ ржПржХржЯрж┐  ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХржорзЛржи ржХрж▓рж╛ржорзЗрж░ рждржерзНржпрзЗрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ред `JOIN` ржорзБрж▓ржд рж╕ржоржирзНржмрж┐ржд ржлрж▓рж╛ржлрж▓ ржжрзЗржЦрж╛рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред рж╕рж╛ржзрж╛рж░ржгржд ржЯрзЗржмрж┐рж▓ржЧрзБрж▓рзЛрж░ ржорж╛ржЭрзЗ ржпржжрж┐ ржХрзЛржирзЛ рж╕ржорзНржкрж░рзНржХ ржерзЗржХрзЗ ржерж╛ржХрзЗ, ржпрзЗржоржиржГ ржПржХржЯрж┐ ржЯрзЗржмрж┐рж▓рзЗрж░ `ржкрзНрж░рж╛ржЗржорж╛рж░рж┐ ржХрзА` ржЕржкрж░ ржПржХржЯрж┐ ржЯрзЗржмрж┐рж▓рзЗ `ржлрж░рзЗржи ржХрзА` рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред рждржмрзЗ `JOIN` ржкрзНрж░рж╛ржЗржорж╛рж░рж┐-ржлрж░рзЗржи ржХрзА  ржЫрж╛рзЬрж╛ржУ ржХрж░рж╛ ржпрж╛рзЯ ржпржжрж┐ ржирж╛ ржжрзБржЗржЯрзА ржЯрзЗржмрж┐рж▓рзЗрж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐ ржХржорзЛржи ржХрж▓рж╛ржо ржерзЗржХрзЗ ржерж╛ржХрзЗред
## ЁЯФ╢ JOIN ржХрзЗржи ржкрзНрж░рзЯрзЛржЬржи?
ржзрж░рзЛ рждрзЛржорж╛рж░ ржХрж╛ржЫрзЗ ржПржХржЯрж╛ ржмрж┐ржжржпрж╛рж▓рзЯ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рж╛рж░ ржЬржирзНржп ржжрзБржЗржЯрж┐ ржЯрзЗржмрж┐рж▓ ржжрзЗржУрзЯрж╛ ржЖржЫрзЗ ржПржХржЯрж╛ рж╣рж▓ `students` ржПржмржВ `marks`|

### students ржЯрзЗржмрж┐рж▓ -> (student_id, name)

### marks ржЯрзЗржмрж┐рж▓    -> (student_id, subject, score)

 тЭУржПржЦржи ржЖржорж░рж╛ ржпржжрж┐ ржЬрж╛ржирждрзЗ ржЪрж╛ржЗ ржмрж┐ржжржпрж╛рж▓рзЯрзЗрж░ рж╕ржХрж▓ рж╢рж┐ржХрзНрж╖рж╛рж░рзНржерзА ржЧржирж┐ржд рж╕рж╛ржмржЬрзЗржХрзНржЯрзЗ ржХржд ржорж╛рж░рзНржХрзНрж╕ ржХрж░рзЗ ржкрзЗрзЯрзЗржЫрзЗ?

## тЬЕ SQL Query:
```sql
SELECT s.name, m.score
FROM students s
JOIN marks m ON s.student_id = m.student_id
WHERE m.subject = 'Math';

```
## ЁЯЫая╕П JOIN ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

JOIN ржорзВрж▓ржд ржжрзБржЯрж┐ ржЯрзЗржмрж┐рж▓рзЗрж░ ржПржХржЯрж┐  ржХрж▓рж╛ржо (common column) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЯрзЗржмрж┐рж▓ ржжрзБржЗржЯрж┐рзЬ ржоржзрзНржпрзЗ ржорж┐рж▓ рждрзИрж░рж┐ ржХрж░рзЗ ржПржмржВ ржПржХржЯрж┐ ржирждрзБржи рж░рзЗржХрж░рзНржб рждрзИрж░рж┐ ржХрж░рзЗред

## ЁЯУВ JOIN-ржПрж░ ржкрзНрж░ржХрж╛рж░ржнрзЗржж


| ЁЯФв JOIN ржЯрж╛ржЗржк        | ЁЯзй ржХрж╛ржЬрзЗрж░ ржмрзНржпрж╛ржЦрзНржпрж╛                                                                 |
|---------------------|----------------------------------------------------------------------------------|
| **INNER JOIN**      | рж╢рзБржзрзБ рж╕рзЗржЗ рж░рзЗржХрж░рзНржбржЧрзБрж▓рзЛ ржжрзЗржЦрж╛рзЯ, ржпрзЗржЗ рж░рзЗржХрж░рзНржб ржЧрзБрж▓рж┐рждрзЗ ржХржорзЛржи ржХрж▓рж╛ржо  ржжрзБржЗ ржЯрзЗржмрж┐рж▓рзЗ ржЖржЫрзЗ      |
| **LEFT JOIN**       | ржмрж╛ржо ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕ржм рж░рзЗржХрж░рзНржб ржжрзЗржЦрж╛рзЯ, рж╕рж╛ржерзЗ ржпрзЗржЧрзБрж▓рзЛ ржбрж╛ржи ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕рж╛ржерзЗ ржорж┐рж▓рзЗ тАФ ржирж╛ ржорж┐рж▓рж▓рзЗ `NULL`ред    |
| **RIGHT JOIN**      | ржбрж╛ржи ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕ржм рж░рзЗржХрж░рзНржб ржжрзЗржЦрж╛рзЯ, рж╕рж╛ржерзЗ ржпрзЗржЧрзБрж▓рзЛ ржмрж╛ржо ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕рж╛ржерзЗ ржорж┐рж▓рзЗ тАФ ржирж╛ ржорж┐рж▓рж▓рзЗ `NULL`ред    |
| **FULL OUTER JOIN** | ржжрзБржЗ ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕ржм рж░рзЗржХрж░рзНржбржЗ ржжрзЗржЦрж╛рзЯред ржпрзЗржЦрж╛ржирзЗ ржорж┐рж▓ ржирзЗржЗ, рж╕рзЗржЦрж╛ржирзЗ `NULL` ржнрзНржпрж╛рж▓рзБ ржмрж╕рж┐рзЯрзЗ ржжрзЗрзЯред          |
| **CROSS JOIN**      | ржжрзБржЯрж┐ ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕ржм рж╕ржорзНржнрж╛ржмрзНржп combination ржжрзЗржЦрж╛рзЯ (ржХрж╛рж░рзНржЯрзЗрж╕рж┐рзЯрж╛ржи ржкрзНрж░рзЛржбрж╛ржХрзНржЯ)ред                       |
| **SELF JOIN**       | ржПржХржЗ ржЯрзЗржмрж┐рж▓ржХрзЗ ржирж┐ржЬрзЗрж░ рж╕рж╛ржерзЗ JOIN ржХрж░рж╛ рж╣рзЯ    |

## ЁЯУК PostgreSQL-ржП `JOIN` ржПрж░ рж╕рзБржмрж┐ржзрж╛

PostgreSQL ржПржХржЯрж┐ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА рж░рж┐рж▓рзЗрж╢ржирж╛рж▓ ржбрзЗржЯрж╛ржмрзЗржЬ рж╕рж┐рж╕рзНржЯрзЗржо ржПржмржВ JOIN ржЕржкрж╛рж░рзЗрж╢ржиржЧрзБрж▓рзЛ ржПржЦрж╛ржирзЗ ржЕрждрзНржпржирзНржд ржжрзНрж░рзБржд ржУ ржХрж╛рж░рзНржпржХрж░ржнрж╛ржмрзЗ ржЪрж▓рзЗред ржПржЯрж┐ ржмрзЬ ржбрзЗржЯрж╛рж╕рзЗржЯрзЗрж░ ржЬржирзНржп ржЕржкрзНржЯрж┐ржорж╛ржЗржЬржб ржПржмржВ complex queries рж╣рзНржпрж╛ржирзНржбрж▓ ржХрж░рждрзЗ рж╕ржХрзНрж╖ржоред



# рзл. тЭУ `GROUP BY` clause ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░ ржПржмржВ `aggregation operations` ржП ржПрж░ ржнрзБржорж┐ржХрж╛ ржХрж┐ ?

ржбрзЗржЯрж╛ржмрзЗрж╕рзЗрж░ ржЬржЧрждрзЗ ржЖржорж░рж╛ ржЕржирзЗржХ рж╕ржорзЯ ржПржоржи ржкрж░рж┐рж╕рзНржерж┐рждрж┐рж░ рж╕ржорзНржорзБржЦрзАржи рж╣ржЗ, ржпрзЗржЦрж╛ржирзЗ рж╛ржорж╛ржжрзЗрж░ ржПржоржи ржХрж┐ржЫрзБ ржЧрзБржЪржЫ ржЖржХрж╛рж░рзЗрж░ ржбрзЗржЯрж╛рж░ ржЧрзБржирж╛ржмрж▓рж┐ , ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржЬрж╛ржирж╛ ржХрж┐ржВржмрж╛ рждрж╛ржжрзЗрж░ ржЙржкрж░ ржЧрж╛ржгрж┐рждрзАржХ рж╣рж┐рж╕рж╛ржм ржирж┐ржХрж╛рж╢ ржХрж░рж╛рж░ ржкрзНрж░рзЯрзЛржЬржи ржкрж░рзЗ (ржпрзЗржоржи: ржорзЛржЯ, ржЧрзЬ, рж╕ржВржЦрзНржпрж╛ ржЧржгржирж╛) ржХрж░рждрзЗ рж╣рзЯред ржПржЗ ржХрж╛ржЬржЯрж┐ GROUP BY ржХрзНрж▓ржЬрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржЦрзБржм рж╕рж╣ржЬрзЗ ржХрж░рж╛ ржпрж╛рзЯред

## ЁЯФН `Aggregation` Operations ржХрзА? 

Aggregation operations ржорж╛ржирзЗ рж╣рж▓ ржбрзЗржЯрж╛рж░ ржЙржкрж░ рж╕рж╛рж░рж╛ржВрж╢ (summary) рждрзИрж░рж┐ ржХрж░рж╛ред ржПржЯрж┐ ржкрзНрж░рждрж┐ржЯрж┐ рж░рзЗржХрж░рзНржб ржПрж░ ржЬржирзНржп ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░ржмрзЗ ржПржмржВ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ рж╢рзЗрж╖ рж╣рж▓рзЗ ржХрзЗржмрж▓ ржорж╛рждрзНрж░ ржПржХржЯрж┐ рж░рзЗржЬрж╛рж▓рзНржЯ ржжрзЗржмрзЗ| ржЖржкржирж┐ ржпржжрж┐ ржЕржирзЗржХ ржбрзЗржЯрж╛ ржерзЗржХрзЗ ржЧрзЬ, ржпрзЛржЧржлрж▓, рж╕рж░рзНржмрзЛржЪрзНржЪ ржмрж╛ рж╕рж░рзНржмржирж┐ржорзНржи ржмрзЗрж░ ржХрж░рждрзЗ ржЪрж╛ржи, рждржЦржи Aggregation ржЕржкрж╛рж░рзЗрж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред

## ЁЯза `GROUP BY` ржХрзА?

GROUP BY рж╣рж▓ ржПржХржЯрж┐ SQL ржХрзНрж▓ржЬ, ржпрж╛ ржбрзЗржЯрж╛ржЧрзБрж▓рж┐ржХрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржХржЯрж┐ ржХрж▓рж╛ржорзЗрж░ ржорж╛ржи ржЕржирзБрж╕рж╛рж░рзЗ ржЧрзНрж░рзБржк ржХрж░рзЗред ржПрж░ржкрж░ ржкрзНрж░рждрж┐ржЯрж┐ ржЧрзНрж░рзБржкрзЗрж░ ржЙржкрж░ ржЖржорж░рж╛ ржмрж┐ржнрж┐ржирзНржи Aggregation Function (ржпрзЗржоржи `COUNT()`, `SUM()`, `AVG()`, `MAX()`, `MIN()`) ржкрзНрж░рзЯрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред



## ЁЯЫая╕П Syntax:
```sql
SELECT column_name, AGGREGATE_FUNCTION(column_name)
FROM table_name
GROUP BY column_name;
```
## ЁЯУМ ржЙржжрж╛рж╣рж░ржг : ржкрзНрж░рждрж┐ржЯрж┐ ржмрж┐рж╖рзЯрзЗ  ржХрждржЬржи рж╢рж┐ржХрзНрж╖рж╛рж░рзНржерзА  ржкрж░рзАржХрзНрж╖рж╛  ржжрж┐рзЯрзЗржЫрзЗ?
ржЖржорж░рж╛ ржЖржорж╛ржжрзЗрж░ ржЖржЧрзЗрж░  ржмрж┐ржжржпрж╛рж▓рзЯрзЗрж░ `marks -> (student_id, subject, score)`
ржЯрзЗржмрж┐рж▓рзЗ ржлрж┐рж░рзЗ ржпрж╛ржЗредржЖржорж░рж╛ ржПржмрж╛рж░ ржЬрж╛ржирждрзЗ ржЪрж╛ржЗ  ржкрзНрж░рждрж┐ржЯрж┐ ржмрж┐рж╖рзЯрзЗ  ржХрждржЬржи рж╢рж┐ржХрзНрж╖рж╛рж░рзНржерзА  ржкрж░рзАржХрзНрж╖рж╛  ржжрж┐рзЯрзЗржЫрж┐рж▓?
| student\_id | subject | score |
| ----------- | ------- | ----- |
| 1           | Math    | 80    |
| 2           | Math    | 90    |
| 3           | English | 75    |
| 4           | Math    | 60    |
| 5           | English | 85    |

## Query

```sql
SELECT subject, COUNT(*) AS total_students
FROM marks
GROUP BY subject;
```
## Output
| subject | total\_students |
| ------- | --------------- |
| Math    | 3             |
| English | 2              |

ЁЯФН ржПржЦрж╛ржирзЗ subject ржХрж▓рж╛ржорзЗрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ GROUP BY ржХрж░рж╛ рж╣ржЗрзЯрзЗржЫрзЗ ред ржПрж░ржкрж░
`Aggregation function` COUNT(*) ржкрзНрж░рждрж┐ржЯрж┐ ржЧрзНрж░рзБржкрзЗрж░ ржЙржкрж░ ржЪрж╛рж▓ржирж╛ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ  ржПржмржВ ржПржЯрж┐ ржкрзНрж░рждрж┐ ржЧрзНрж░рзБржкрзЗрж░ ржЬржиржп ржХрзЗржмрж▓ржорж╛рждрзНрж░ ржПржХржЯрж╛ ржЖржЙржЯржкрзБржЯ ржжрзЗржмрзЗред

## ЁЯУМ ржЙржжрж╛рж╣рж░ржг : ржкрзНрж░рждрж┐ржЯрж┐ ржмрж┐рж╖рзЯрзЗ ржЧрзЬ ржиржорзНржмрж░ ржмрзЗрж░ ржХрж░рж╛
```sql
SELECT subject, COUNT(*) AS total_students
FROM marks
GROUP BY subject;
```
## Output

| subject | total\_students |
| ------- | --------------- |
| Math    | 3               |
| English | 2               |


## тЪая╕П ржХрж┐ржЫрзБ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржирж┐рзЯржо:

- SELECT ржХрзНрж▓ржЬрзЗ ржпрзЗ рж╕ржм ржХрж▓рж╛ржо ржерж╛ржХржмрзЗ, рж╕рзЗржЧрзБрж▓рзЛ ржЕржмрж╢рзНржпржЗ рж╣рзЯ GROUP BY-рждрзЗ ржерж╛ржХрждрзЗ рж╣ржмрзЗ, ржЕржержмрж╛ Aggregation Function-ржПрж░ ржоржзрзНржпрзЗ ржерж╛ржХрждрзЗ рж╣ржмрзЗредржирж╛ рж╣рж▓рзЗ ржЗрж░рзЛрж░ рж╢рзЛ ржХрж░ржмрзЗ ржХрзБржЗрж░рж┐ рж░рж╛ржи ржХрж░рж╛рж░ рж╕ржорзЯред

- WHERE ржХрзНрж▓ржЬ GROUP BY-ржПрж░ ржЖржЧрзЗ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ, ржЖрж░ HAVING ржХрзНрж▓ржЬ ржкрж░рзЗред

## ЁЯОп GROUP BY ржПрж░ ржнрзВржорж┐ржХрж╛:

- ржбрзЗржЯрж╛ ржмрж┐рж╢рзНрж▓рзЗрж╖ржгрзЗ ржЕрждрзНржпржирзНржд ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг: ржПржЯрж┐ ржЖржорж╛ржжрзЗрж░ ржмрж┐ржнрж┐ржирзНржи ржХрзНржпрж╛ржЯрж╛ржЧрж░рж┐ ржЕржирзБржпрж╛рзЯрзА ржбрзЗржЯрж╛ ржмрзБржЭрждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред

- Report рждрзИрж░рж┐ ржХрж░рж╛ рж╕рж╣ржЬ рж╣рзЯ: ржпрзЗржоржи ржкрзНрж░рждрж┐ржЯрж┐ ржмрж┐ржнрж╛ржЧрзЗ ржХрждржЬржи ржХрж░рзНржоржЪрж╛рж░рзА ржЖржЫрзЗ, ржХрзЛржи ржкржгрзНржпрзЗрж░ ржорзЛржЯ ржмрж┐ржХрзНрж░рзЯ ржХржд тАФ ржПрж╕ржм рж╕рж╣ржЬрзЗ ржмрзЗрж░ ржХрж░рж╛ ржпрж╛рзЯред

- Aggregation Function-ржПрж░ рж╕рж╛ржерзЗржЗ ржХрж╛рж░рзНржпржХрж░: ржпрзЗржоржи SUM, AVG, MAX, MIN, COUNTред
- ржЧрзНрж░рзБржк ржнрж┐рждрзНрждрж┐ржХ ржбрзЗржЯрж╛рж░ рж╕ржорзНржкрж░рзНржХ ржП ржЬрж╛ржирж╛ ржпрж╛рзЯред
- ржХржоржкрзНрж▓рзЗржХрзНрж╕ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржирзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░ржмрзЗред






